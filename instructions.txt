i need your help outlining and creating a very detailed plan for how to go about building my application. (this current project/codebase was for learning the basics of flask and testing deployment. i had never deployed via Linux before so this was to just gain some hands-on knowledge. now i will be working on the actual application i had in mind, which was the reason for learning flask. this is what you will help me with: the project/app i have outlined below.)

study the codebase very carefully before working on the plan. do not make any changes! just study it and read every line of code and dependency and method and import and so on. you must understand how the codebase is structured!

once you're done with the task, create the step-by-step and very detailed plan in a .md file inside the working directory (probably using the WriteFile tool you have access to). structure it well.


THE APP:

the core idea: a website where students at KTH (kungliga tekniska h√∂gskolan, Stockholm) can sign in using their @kth.se (or @ug.kth.se) mails and rate/review KTH courses. 

i will only allow students with a valid @kth.se or @ug.kth.se mail to sign up (so i'll need to add a verification for that, which is an example of one of the many steps in the plan you'll create. perhaps verification by clicking a link in a mail to actually create the account in the database or something. and that, as with most other things, comes with downstream issues and considerations: adding a condition for a user who has signed-up in the register form but hasn't yet clicked the link in the mail, they should see a different error message when trying to sign in compared to people who haven't tried registering at all). 

when signing up, the user must choose one of the existing programs on KTH that will be assigned to their profile (i will likely create a database with all the KTH related stuff and somehow fetch this to the register page.)

i'm not quite sure how to handle all KTH related data: all the programs, all courses, and all the professors, and how programs-courses are connected and courses-professors are connected. not sure what the best way to go about this is. one database? multiple databases? the idea for programs is that the user will choose it for their profile (editable later). the courses are for when the user wants to post a review: they should by default only be able to review courses avalible in their program (with some exceptions which i will handle manually). and professors are also for each post, so the user should only be able to select professors who have actually held that course. help me, what's the most robust way to handle this?! 

i want to make the MVP simple and use as much of the existing code and concepts as possible (flask allows for lost of efficiencies). in other words, i want to change as little as possible.

only signed in users (@kth.se or @ug.kth.se) should be able to post. ALL other, non-signed-in users, should only be able to view the reviews and ratings. 

when making a post, the user should be redirected to a post page (which exists. some of the things i mentioned previously already exist, just that it seems i have to add/build on them a bit) where they can select which course to review. a user should not be able to review the same course twice, only edit an existing review or delete it and do a new one.

in the future, maybe not for the MVP, i want a pre-populated field of the current professor depending on the selected course. a dropdown should be avalible though where the user can change to another professor who has previously had the course.

perhaps i will also allows signed in users to like other user's reviews. if this isn't simple then i will skip it, but it'd be nice to allow signed in users (only!) to show that another review was helpful.


YOUR TASK: help me create a very detailed and structured plan for how i should approach this project. each task should have a very technical and detailed explanation associated with it: what is the change? why? what are some ways to approach it? which alternative is best? what changes need to be made? could this affect any existing code? if so, what exactly? and what changes will be downstream from this? what could effect this in the future? and so on. you also need to think very hard about what order each task comes in. iterate on this many times. it is extremely important that i do not work on things in the wrong order (some things might need other features already implemented to work and so on). outline 5 different plans and reason about all of them individually. after thinking about the pros and cons of each approach for many iterations, pick the best one. be very detailed in the instructions for each step and each task. 

perhaps i have also missed some crucial features or security considerations or other stuff above. it was just a quick brainstorm where i'm trying to give you an image of what i'm picturing for this app. it is very important you stay independent-minded and do your own research and think for yourself: "is this the best way to approach this?" "could this be handled in a different way?" "should something else be done before making changes here?" "how do review websites usually handle this?" "how are review and rating websites usually structued?" and so on. 

IMPORTANT: do not provide me with entire, finished code files! i want thorough explanations and guides of specific implementations. you should provide code (such as skeleton code or code that helps me understand the structure of what i'm about to do) that is helpful for understanding the task, but never entire, complete files of code! ALWAYS review the code you plan to send before sending it to make sure it helps me understand what i'm about to do and importantly, HOW IT'S SIMILAR TO WHAT I'VE ALREADY DONE IN THE CODEBASE! referring back to existing code and concepts is super helpful! 

IMPORTANT: it is EXTREMELY important that you keep Object Oriented Programming best practices top of mind at all times. i want to make this website very very clean and robust. you should meticulously double-check every step of the task to make sure the suggested approach is secure, robust, clean, and follow OOP best practices. security is super important. any time security is related to the task, make it VERY explicit. i want to know so i can do further research!

some intuition pumps:

1. getting the information. all of the information i will be using is available on the KTH website (some of it only to students perhaps, but i'm a student at KTH).
how should i extract/get the course name and what program(s) it belongs to. potentially also who the professor was during the time of the user taking the course (depending on the year, perhaps there's a new professor now). selecting professor should be in a dropdown inside the course-review if i choose to do it though.
my question is what the best way to get the information is. I've successfully scraped a kth program's web page using "itsdangerous" in python as a test. it worked pretty well and i wouldn't have too much of a problem getting the information manually it seems. are there any more optimal and efficient ways? i don't want to complicate it.

2. how to structure the website.
study the current codebase. i have tried to learn the basics. i'm new to flask. but the current implementations seem to cover most ground that will be used for the rating/review system. what is the most robust way to structure the codebase going forward, while trying to mess with as little code as possible?

3. keeping security top notch.
what are ways in which security could be ruined or messed with during the process? how can it be prevented?


my primary goals are: clean, structured, OOP code and high security.


REVIEW: before finalizing your work, you must meticulously double-check every part of the guide which should be inside a .md file. go through it step-by-step, one implementation at a time. make sure everything makes sense and follows the "IMPORTANT" guidelines. try to spot any steps that seem to not align with the IMPORTANT guidelines. iterate on them! think very hard and be very precise!